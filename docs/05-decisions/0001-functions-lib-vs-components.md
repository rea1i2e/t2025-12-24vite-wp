# 1. functions-lib と components の使い分け

**ステータス**: 承認済み

## コンテキスト

プロジェクトでは、再利用可能なコードを `functions-lib/` と `components/` の2つのディレクトリで管理しています。どちらを使うべきか判断基準を明確にする必要がありました。

- `functions-lib/`: 関数として定義し、`ty_` プレフィックスを付与（例: `ty_display_thumbnail()`, `ty_img()`）
- `components/`: `get_template_part()` で読み込むテンプレートファイル（例: `c-button`, `c-heading`）

両方とも同じような出力（HTMLの生成）を行うため、使い分けの基準を明確にする必要がありました。

## 決定

以下の判断基準で使い分けます。

### functions-lib が適しているもの

- **`echo` だけでなく `return` で返すことも想定するもの**
  - 例: 画像のパステキストだけ返してもらい、配列に格納する
  - 例: `ty_img()` は `echo` も `return` も可能
- **データ取得ロジックが含まれるもの**
  - 例: `ty_display_thumbnail()` はサムネイルの取得と表示を両方行う
- **シンプルな単一タグの出力**
  - 例: `<img>` タグの生成

### components が適しているもの

- **`return` で返す場面は想定しないもの**
  - 必ず、HTMLまたはテキストを `echo` する
- **ロジックよりもHTML構造の定義に比重があるもの**
  - HTMLの可読性が高い
  - 複雑な構造や複数タグのもの
  - 例: `<a><span>` のようなネスト構造、`<hgroup><h2><p>` のような複数タグ
- **デザイナーやフロントエンドエンジニアが編集する可能性があるもの**
  - テンプレートファイルとして構造が見やすい

## 結果

この判断基準により、以下のような使い分けが明確になりました。

- **functions-lib方式**: `ty_display_thumbnail()`, `ty_img()` など、シンプルな出力やデータ取得を含むもの
- **components方式**: `c-button`, `c-heading` など、複雑なHTML構造を持つもの

この方針により、コードの可読性と保守性が向上し、開発者が適切な場所にコードを配置できるようになりました。

## 関連ADR

なし
