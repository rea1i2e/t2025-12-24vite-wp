# 8. 固定ページの本文エディタ表示制御

**ステータス**: 承認済み

## コンテキスト

`the_content()` や `the_excerpt()` を出力しない固定ページテンプレート（例: ランディング、お問い合わせ）では、管理画面で本文を編集してもフロントに反映されず、クライアントが混乱する可能性がある。一方で抜粋は SEO・OGP で利用されるため残したい。

## 決定

**`functions-lib/func-page-editor.php` で、本文を使わないテンプレートを指定し、本文エディタのみ非表示にして抜粋は残す。**

- **対象テンプレート**: `$ty_page_editor_no_content_templates` にテンプレートファイル名（例: `page-about.php`）を列挙する。
- **判定方法（実質テンプレート）**: 管理画面でテンプレートを明示選択している場合は `_wp_page_template` の値を使う。未選択（default）の場合は `page-{スラッグ}.php` とみなし、リストと照合する。Template Name を付けていない運用でもスラッグで一致する。
- 対象ページはブロックエディタではなくクラシック編集画面に切り替え、`remove_post_type_support('page', 'editor')` で本文エディタの描画をスキップする。抜粋は残す。
- 対象ページの編集画面には、本文エディタを非表示にしている旨の管理者向け通知を表示する。

## 結果

- 本文を使わない固定ページでは編集画面が簡素になり、抜粋は SEO・OGP 用に編集可能なままとなる。
- Template Name を付けない運用でも、スラッグから「実質テンプレート」を推定するため、リストに `page-about.php` などを書くだけで about ページでエディタが非表示になる。
- 対象テンプレートの追加・削除は `$ty_page_editor_no_content_templates` の編集で行う。
- 実装詳細は `func-page-editor.php` のコメントを参照。

## 関連ADR

なし
