/* ホバーで下線を引くスタイル
・下線をふわっと表示
・下線を右から左へ表示して左に消える
使い方
.d-hover-text-underline-slide {
  @include hover-text-underline-slide(); // デフォルト
}
.p-nav a {
  @include hover-text-underline-slide($height: 2px, $offset: -2px);
}
.p-link--accent {
  @include hover-text-underline-slide($color: #3b5bff);
}
*/

/* ふわっと表示 */
@mixin hover-text-underline (
  $color: currentColor,
) {
  text-decoration: underline;
  text-decoration-color: transparent;
  transition: text-decoration-color var(--hover-transition);

  @media (any-hover: hover) {
    &:hover {
      opacity: 1;
      text-decoration-color: $color;
    }
  }

  &:focus-visible {
    opacity: 1;
    text-decoration-color: $color;
  }
}



/* 左から右へ */
@mixin hover-text-underline-slide(
  $height: 1px,
  $color: currentColor,
  $offset: 0,              // 下線の位置（例: -2px で少し下へ）
) {
  position: relative;

  &::before {
    position: absolute;
    inset-inline: 0;
    inset-block-end: $offset;
    height: $height;
    background-color: $color;
    content: "";
    scale: 0 1;
    transform-origin: right;
    transition: scale var(--hover-transition);
  }

  @media (any-hover: hover) {
    &:hover {
      opacity: 1;
    }
  
    &:hover::before {
      scale: 1 1;
      transform-origin: left;
    }
  }

  &:focus-visible {
    opacity: 1;
  }

  &:focus-visible::before {
    scale: 1 1;
    transform-origin: left;
  }
}